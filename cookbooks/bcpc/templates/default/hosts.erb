################################################
#
#              Generated by Chef
#
################################################

127.0.0.1	localhost

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters

<% @servers.each do |server| -%>
<%   if server.has_key?('hostname') and server.has_key?('bcpc') and server['bcpc'].has_key?('management') and server['bcpc']['management'].has_key?('ip') -%>
<%=    "#{server['bcpc']['management']['ip']}   #{server['fqdn']} #{server['hostname']}.#{node['bcpc']['domain_name']} #{server['hostname']}" %>
<%   else -%>
<%     Chef::Log.fatal("Server #{server} has not all required attributes") -%>
<%   end -%>
<% end -%>

<% @servers.select{|s| not s.name.include? 'bootstrap' }.each do |server| -%>
<%   if server.has_key?('hostname') and server.has_key?('bcpc') and server['bcpc'].has_key?('storage') and server['bcpc']['storage'].has_key?('ip') -%>
<%=   "#{server['bcpc']['storage']['ip']}   #{storage_host(server.fqdn)} #{storage_host(server.hostname, server['bcpc']['domain_name'])} #{storage_host(server.hostname)}" %>
<%   else -%>
<%     Chef::Log.fatal("Server #{server} has not all required attributes") -%>
<%   end -%>
<% end -%>

<% @servers.select{|s| not s.name.include? 'bootstrap' }.each do |server| -%>
<%   if server.has_key?('hostname') and server.has_key?('bcpc') and server['bcpc'].has_key?('floating') and server['bcpc']['floating'].has_key?('ip') -%>
<%=    "#{server['bcpc']['floating']['ip']}   #{float_host(server.fqdn)} #{float_host(server.hostname, server['bcpc']['domain_name'])} #{float_host(server.hostname)}" %>
<%   else -%>
<%     Chef::Log.fatal("Server #{server} has not all required attributes") -%>
<%   end -%>
<% end -%>
